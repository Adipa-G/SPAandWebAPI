<div class="row">
  <div class="col-md-4 offset-md-2">
    <div class="mb-3">
      <label for="logLevel" class="form-label">Level</label>
      <select class="form-control" id="logLevel" name="logLevel"
        [(ngModel)]="filter.logLevel"
        (ngModelChange)="updateView(filter)">
        <option [value]=""></option>
        @for (level of logLevels; track level) {
          <option [value]="level">{{level}}</option>
        }
      </select>
    </div>
  </div>
  <div class="col-md-4">
    <div class="mb-3">
      <label for="logger" class="form-label">Logger</label>
      <select class="form-control" id="logger" name="logger"
        [(ngModel)]="filter.logger"
        (ngModelChange)="updateView(filter)">
        <option [value]=""></option>
        @for (logger of loggers; track logger) {
          <option [value]="logger">{{logger}}</option>
        }
      </select>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-4 offset-md-2">
    <label class="form-label">Date From</label>
    <div class="mb-3">
      <input type="text" name="fromDateLocal"
        [(ngModel)]="filter.fromDateLocal"
        class="form-control"
        placeholder="yyyy-MM-dd"
        (ngModelChange)="updateView(filter)"/>
    </div>
  </div>
  <div class="col-md-4">
    <label class="form-label">Date To</label>
    <div class="mb-3">
      <input type="text" name="toDateLocal"
        [(ngModel)]="filter.toDateLocal"
        class="form-control"
        placeholder="yyyy-MM-dd"
        (ngModelChange)="updateView(filter)"/>
    </div>
  </div>
</div>

<div class="row mt-5">
  <div class="col-md-10 offset-md-1">
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover">
        <thead>
          <tr>
            <th [sort-header]="filter" order-field="LogTimestamp" text="Time" (order-changed)="updateView(filter)"></th>
            <th [sort-header]="filter" order-field="Logger" text="Logger" (order-changed)="updateView(filter)"></th>
            <th [sort-header]="filter" order-field="Level" text="Level" (order-changed)="updateView(filter)"></th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          @for (log of logMessages; track log) {
            <tr>
              <td [utc-to-local]="log.logTimestamp"></td>
              <td>{{ log.logger }}</td>
              <td>{{ log.level }}</td>
              <td>
                <dl class="row">
                  <dt class="col-sm-1">Message</dt>
                  <dd class="col-sm-11">{{ log.message }}</dd>
                  <dt class="col-sm-1" [hidden]="!log.stackTrace">Stack Trace</dt>
                  <dd class="col-sm-11" [hidden]="!log.stackTrace">{{ log.stackTrace }}</dd>
                </dl>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
    <div [pagination]="filter" [total-count]="totalCount" (page-changed)="updateView(filter)"></div>
  </div>
</div>